<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="/stylesheet/myaccount.css">
<head>
    <meta charset="UTF-8">
    <title>My Account</title>
    <script src="/javascript/editAccount.js"></script>
</head>
<body>
    <h1>My Profile</h1>
    <a href="/homepage">Homepage</a>

    <div class="userInfo" id="userDisplay">
        <h2>Account Details</h2>
        <a href="#" onclick="editField()">Edit</a>

        <p><strong>Username:</strong> <span id="usernameDisplay" th:text="${user.username}">Username</span></p>
        <!-- Password display as part of test -->
        <p><strong>Password:</strong> <span id="passwordDisplay" th:text="${user.password}">Password</span></p>
        <!-- Dates commented out because not implemented currently-->
        <!-- <p><strong>Birthday:</strong> 
            <span id="birthdayDisplay" th:text="${user.birthday} ? ${user.birthday} : 'June 22, 2024'"></span>
        </p>
        <p><strong>Date Account Created:</strong> 
            <span id="dateCreatedDisplay" th:text="${user.dateCreated} ? ${user.dateCreated} : 'January 1, 1970'"></span>
        </p> -->
        <!-- ${user.bio} ? ${user.bio} : means it'll display text after ':' if bio is empty -->
        <p><strong>Bio:</strong> <span id="bioDisplay" th:text="${user.bio} ? ${user.bio} : 'Lorem ipsum dolor sit amet...'"></span></p>
    </div>
    
    
    <!-- form to change user info
    form doesn't appear until user clicks edit -->
    <div id="editForm" style="display: none;">
        <h2>Edit Account Details</h2>
        <!-- return false just disables default behaviour -->
        <form id="editForm" th:action="@{/user/{id}(id=${user.id})}" onsubmit="saveChanges(); return false;">
            <!-- Hidden input field for user ID for passing into backend -->
            <input type="hidden" id="userId" name="userId" th:value="${user.id}">

            <label for="editUsername">Username:</label><br> 
            <input type="text" id="editUsername" name="editUsername" required><br><br>

            <!-- remove later for security -->
            <label for="editPassword">Password:</label><br> 
            <input type="text" id="editPassword" name="editPassword" required><br><br>
            
            <!-- Uncomment these for birthday and date created if we implement them -->
            <!-- <label for="editBirthday">Birthday:</label><br>
            <input type="date" id="editBirthday" name="editBirthday"><br><br>
            
            <label for="dateCreated">Date Account Created:</label><br>
            <input type="text" id="dateCreated" name="dateCreated" readonly><br><br> -->
    
            <label for="editBio">Bio:</label><br>
            <textarea id="editBio" name="editBio" placeholder="Enter your bio..."></textarea><br><br>
            
            <button type="button" onclick="cancelEdit()">Cancel</button>
            <button type="submit">Save Changes</button>
        </form>
    </div>

    <div class="manageAccount">
        <h2>Manage Account</h2>

        <!-- <a href="#" id="deleteAccount">Delete Account</a><br><br> -->
        <form id="deleteForm">
            <button type="button" onclick="deleteUser()">Delete Account</button>
        </form>
                      
        <a href="#">Log Out</a>
    </div>
    

</body>
</html>